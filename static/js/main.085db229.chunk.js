(window["webpackJsonpgoit-react-hw-04-movies"]=window["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{16:function(e,t,n){e.exports={header:"style_header__1pUZY",link:"style_link__350XL",linkActive:"style_linkActive__Xi1hh"}},19:function(e,t,n){e.exports={searchForm:"style_searchForm__VeWpv",button:"style_button__1gfd1"}},24:function(e,t,n){e.exports={movieDetailsPage:"style_movieDetailsPage__2bfdN",backButton:"style_backButton__23JQh"}},25:function(e,t,n){e.exports={character:"style_character__30OJh",img:"style_img__zBY5K"}},27:function(e,t,n){e.exports={movieCard:"style_movieCard__3cI0J",movieCardInfo:"style_movieCardInfo__2F9A8"}},40:function(e,t,n){e.exports={spinner:"style_spinner__2q7gY",homePage:"style_homePage__qCRAd"}},43:function(e,t,n){e.exports={moviesPage:"style_moviesPage__evZ_r"}},44:function(e,t,n){e.exports=n(93)},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(39),o=n.n(c),i=n(13),s=n(8),l=n(9),u=n(11),m=n(10),p=n(12),h=n(14),v=n(17),f=n.n(v),b=n(18),y=n.n(b),d=n(40),g=n.n(d),O=n(5);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.moviesList,n=e.url,a=e.location;return r.a.createElement("ul",null,t.map((function(e){var t=e.title,c=e.id;return r.a.createElement("li",{key:c},r.a.createElement(O.b,{to:{pathname:"".concat(n,"/").concat(c),state:j({},a)},id:c},t))})))};_.defaultProps={moviesList:[],url:"/",location:{pathname:"/"}};var w=_,P=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMovies()}},{key:"render",value:function(){var e=this.props,t=e.moviesList,n=e.location;return r.a.createElement("section",{className:g.a.homePage},r.a.createElement(w,{moviesList:t,location:n,url:"/movies"}))}}]),t}(a.Component);P.defaultProps={moviesList:[]};var k=P,S=n(24),C=n.n(S),M=n(25),I=n.n(M),D=function(e){var t=e.credits;return r.a.createElement("div",null,r.a.createElement("ul",null,t.map((function(e){var t=e.character,n=e.name,a=e.profile_path,c=e.id,o=a?"https://image.tmdb.org/t/p/w200".concat(a):"https://prikolnye-kartinki.ru/img/picture/Sep/21/697113e1bbc73e0d6eb2dfa4af89c1e2/2.jpg";return r.a.createElement("li",{key:c,className:I.a.character},r.a.createElement("img",{src:o,alt:"",className:I.a.img}),r.a.createElement("p",null,n),r.a.createElement("p",null,"Character: ",t))}))))};D.defaultProps={credits:[]};var L=D,N=function(e){var t=e.reviews;return r.a.createElement("div",null,!t[0]&&r.a.createElement("h3",null,"There isn't any reviews"),r.a.createElement("ul",null,t.map((function(e){var t=e.author,n=e.content,a=e.id;return r.a.createElement("li",{key:a},r.a.createElement("h3",null,t),r.a.createElement("p",null,n))}))))};N.defaultProps={reviews:[]};var B=N,x=n(26),A=n.n(x);A.a.defaults.baseURL="https://api.themoviedb.org/3";var q=function(e){return A.a.get("".concat(e,"api_key=").concat("399eb4ff66260035740cfbb2ef9e0a30")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},F=n(27),Q=n.n(F),J=function(e){var t=e.movieInfo||"",n=t.backdrop_path,a=t.title,c=t.vote_average,o=t.overview,i=t.genres;return r.a.createElement("div",{className:Q.a.movieCard},r.a.createElement("img",{src:n&&"https://image.tmdb.org/t/p/w500/"+n,alt:"MoviePoster"}),r.a.createElement("div",{className:Q.a.movieCardInfo},r.a.createElement("h2",null,a),r.a.createElement("p",null,"User score: ",c),r.a.createElement("h3",null,"Overview"),r.a.createElement("p",null,o),r.a.createElement("h4",null,"Genres"),r.a.createElement("p",null,i&&i.map((function(e){return e.name})).join(", "))))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={spinner:!1,movieInfo:{},credits:[],reviews:[]},n.location_state=n.props.location.state,n.fetchMovieInfo=function(e,t){n.state.spinner||n.setState({spinner:!0}),q("/movie/".concat(e,"?")).then((function(e){return n.setState(Object(i.a)({},t,"reviews"===t?e.results:"credits"===t?e.cast:e))})).finally((function(){n.setState({spinner:!1}),"credits"!==t&&"reviews"!==t||window.scrollTo({top:400,behavior:"smooth"})}))},n.fetchCast=function(){n.fetchMovieInfo("".concat(n.state.movieInfo.id,"/credits"),"credits")},n.fetchReviews=function(){n.fetchMovieInfo("".concat(n.state.movieInfo.id,"/reviews"),"reviews")},n.goBack=function(){var e=n.props.history;n.location_state?e.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.location_state)):e.push({pathname:"/movies"})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovieInfo(this.props.match.params.movie_id,"movieInfo")}},{key:"render",value:function(){var e=this.props.match.url,t=this.state,n=t.movieInfo,a=t.spinner,c=t.credits,o=t.reviews;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("section",{className:C.a.movieDetailsPage},r.a.createElement("button",{className:C.a.backButton,onClick:this.goBack},"Back"),r.a.createElement(J,{movieInfo:n}),r.a.createElement("div",null,r.a.createElement("p",null,"Additional information"),r.a.createElement(O.b,{to:"".concat(e,"/cast"),onClick:this.fetchCast},"Cast"),r.a.createElement("br",null),r.a.createElement(O.b,{to:"".concat(e,"/reviews"),onClick:this.fetchReviews},"Reviews")),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"".concat(e,"/cast"),render:function(e){return r.a.createElement(L,{credits:c})}}),r.a.createElement(h.b,{path:"".concat(e,"/reviews"),render:function(e){return r.a.createElement(B,{reviews:o})}}))),a&&r.a.createElement(f.a,{style:{zIndex:"99",display:"block"}}))}}]),t}(a.Component),Y=n(19),z=n.n(Y),T=function(e){var t=e.handleSubmit,n=e.onInputChange;return r.a.createElement("form",{className:z.a.searchForm,onSubmit:t},r.a.createElement("input",{className:z.a.searchFormInput,type:"text",placeholder:"Search movies...",onChange:n}),r.a.createElement("button",{type:"submit",className:z.a.button},"Search"))},X=n(43),Z=n.n(X),G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).checkSearchString=function(e){var t=n.props.location.search;if(e&&e.location.search===t)return"";var a=y.a.parse(t.slice(1));return a?a.query:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMoviesByQuery(this.checkSearchString()),this.checkSearchString()}},{key:"componentDidUpdate",value:function(e){this.props.fetchMoviesByQuery(this.checkSearchString(e))}},{key:"render",value:function(){var e=this.props,t=e.moviesList,n=e.handleSubmit,a=e.match,c=e.onInputChange,o=e.location,i=a.url;return r.a.createElement("div",{className:Z.a.moviesPage},r.a.createElement(T,{handleSubmit:n,onInputChange:c}),r.a.createElement(w,{moviesList:t,url:i,location:o}),r.a.createElement(h.b,{path:"".concat(i,"/:movie_id"),render:function(e){return r.a.createElement(U,e)}}))}}]),t}(a.Component);G.defaultProps={moviesList:[]};var H=G,K=n(16),V=n.n(K),W=function(e){e.currentPage;return r.a.createElement("section",{className:V.a.header},r.a.createElement(O.c,{exact:!0,to:"/",className:V.a.link,activeClassName:V.a.linkActive},"Home"),r.a.createElement(O.c,{to:"/movies",className:V.a.link,activeClassName:V.a.linkActive},"Movies"))};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={spinner:!1,popularMoviesList:[],searchMoviesList:[]},n.fetchMovies=function(e,t){n.state.spinner||n.setState({spinner:!0}),q(e).then((function(e){var a=e.results;return n.setState(Object(i.a)({},t,a))})).finally((function(){return n.setState({spinner:!1})}))},n.fetchPopularMovies=function(){n.fetchMovies("/trending/movie/week?","popularMoviesList")},n.fetchMoviesByQuery=function(e){e&&n.fetchMovies("/search/movie?query=".concat(e,"&"),"searchMoviesList")},n.handleSubmit=function(e){if(e.preventDefault(),n.query){var t=n.props,a=t.location;t.history.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{search:y.a.stringify({query:n.query})}))}},n.onInputChange=function(e){var t=e.target.value;n.query=t},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.spinner,c=t.popularMoviesList,o=t.searchMoviesList,i=this.props.location.pathname;return r.a.createElement(a.Fragment,null,r.a.createElement(W,{currentPage:i,changePage:this.changePage}),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,render:function(t){return r.a.createElement(k,Object.assign({},t,{moviesList:c,fetchMovies:e.fetchPopularMovies}))}}),r.a.createElement(h.b,{path:"/movies",render:function(t){return r.a.createElement(H,Object.assign({},t,{moviesList:o,handleSubmit:e.handleSubmit,onInputChange:e.onInputChange,fetchMoviesByQuery:e.fetchMoviesByQuery}))}}),r.a.createElement(h.a,{to:"/"})),n&&r.a.createElement(f.a,null))}}]),t}(a.Component);n(92);o.a.render(r.a.createElement(O.a,{basename:"/"},r.a.createElement(h.b,{component:ee})),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.085db229.chunk.js.map